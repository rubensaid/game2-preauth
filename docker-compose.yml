version: "3.9"

services:
  app:
    build: .
    working_dir: /app
    volumes:
      - ./:/app
      - composer-cache:/tmp/composer
    environment:
      COMPOSER_CACHE_DIR: /tmp/composer
      XDEBUG_MODE: coverage
    # Keep the container idle; invoke commands with `docker compose run --rm app <cmd>`
    command: ["sleep", "infinity"]

volumes:
  composer-cache:
